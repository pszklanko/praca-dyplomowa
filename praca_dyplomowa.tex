\documentclass[a4paper,12pt,twoside,openany]{report}
%
% Wzorzec pracy dyplomowej
% J. Starzynski (jstar@iem.pw.edu.pl) na podstawie pracy dyplomowej
% mgr. inż. Błażeja Wincenciaka
% Wersja 0.1 - 8 października 2016
%
\usepackage{polski}
\usepackage{helvet}
\usepackage[T1]{fontenc}
\usepackage{anyfontsize}
\usepackage[utf8]{inputenc}
\usepackage[pdftex]{graphicx}
\usepackage{tabularx}
\usepackage{array}
\usepackage[polish]{babel}
\usepackage{subfigure}
\usepackage{amsfonts}
\usepackage{verbatim}
\usepackage{indentfirst}
\usepackage[pdftex]{hyperref}


% rozmaite polecenia pomocnicze
% gdzie rysunki?
\newcommand{\ImgPath}{.}

% oznaczenie rzeczy do zrobienia/poprawienia
\newcommand{\TODO}{\textbf{TODO}}


% wyroznienie slow kluczowych
\newcommand{\tech}{\texttt}

% na oprawe (1.0cm - 0.7cm)*2 = 0.6cm
% na oprawe (1.1cm - 0.7cm)*2 = 0.8cm
%  oddsidemargin lewy margines na nieparzystych stronach
% evensidemargin lewy margines na parzystych stronach
\def\oprawa{1.05cm}
\addtolength{\oddsidemargin}{\oprawa}
\addtolength{\evensidemargin}{-\oprawa}

% table span multirows
\usepackage{multirow}
\usepackage{enumitem}	% enumitem.pdf
\setlist{listparindent=\parindent, parsep=\parskip} % potrzebuje enumitem

%%%%%%%%%%%%%%% Dodatkowe Pakiety %%%%%%%%%%%%%%%%%
\usepackage{prmag2017}   % definiuje komendy opieku,nrindeksu, rodzaj pracy, ...


%%%%%%%%%%%%%%% Strona Tytułowa %%%%%%%%%%%%%%%%%
% To trzeba wypelnic swoimi danymi
\title{Wykorzystanie protokołu HTTP/2.0 do budowy szybkiej aplikacji internetowej}

% autor
\author{Piotr Szklanko}
\nrindeksu{244145}

\opiekun{mgr inż. Bartosz Chaber}
\terminwykonania{1 lutego 2017} % data na oświadczeniu o samodzielności
\rok{2017}


% Podziekowanie - opcjonalne
% \podziekowania{\input{podziekowania.tex}}

% To sa domyslne wartosci
% - mozna je zmienic, jesli praca jest pisana gdzie indziej niz w ZETiIS
% - mozna je wyrzucic jesli praca jest pisana w ZETiIS
%\miasto{Warszawa}
%\uczelnia{POLITECHNIKA WARSZAWSKA}
%\wydzial{WYDZIAŁ ELEKTRYCZNY}
%\instytut{INSTYTUT ELEKTROTECHNIKI TEORETYCZNEJ\linebreak[1] I~SYSTEMÓW INFORMACYJNO-POMIAROWYCH}
% \zaklad{ZAKŁAD ELEKTROTECHNIKI TEORETYCZNEJ\linebreak[1] I~INFORMATYKI STOSOWANEJ}
\rodzajpracy{INŻYNIERSKA}
%\kierunekstudiow{INFORMATYKA}
%%% koniec od P.W

\opinie{%
  \input{opiniaopiekuna.tex}
  \newpage
  \input{recenzja.tex}
}

\streszczenia{
  \input{streszczenia.tex}
}

\begin{document}
\maketitle

%-----------------
% Wstęp
%-----------------
\chapter{Wstęp}
Moim celem jest przeprowadzenie testów protokołu HTTP w najnowszej wersji 2.0.
Obecnie powszechnie stosowana jest wersja 1.1, która została wprowadzona w roku 1999.
Jednakże szybki rozwój technologii internetowych sprawia, że wprowadzony osiemnaście lat temu protokół przestaje powoli spełniać swoje zadanie.
Obecnie bez wykorzystania serwerów CDN czy cache przeglądarki nie jest możliwe stworzenie płynnie działającej strony internetowej.
Za pomocą własnoręcznie stworzonej aplikacji chcę przekonać się, czy wprowadzone funkcje faktycznie mają tak ogromny wpływ na szybkość komunikacji pomiędzy klientem i serwerem.

Swoją aplikację stworzyłem wykorzystując zestaw oprogramowania MEAN -- MongoDB, Express.js, Angular i Node.js.
\begin{itemize}
	\item MongoDB -- baza danych NoSQL (cos o mongoose? dodać dokumentację do wszystkich punktów),
	\item Express.js -- framework Node.js do tworzenia aplikacji sieciowych od strony serwera,
	\item Angular -- framework JavaScript służący do budowy dynamicznej aplikacji internetowej od strony użytkownika,
	\item Node.js -- środowisko uruchumieniowe języka JavaScript, które pozwala wystartować serwer.
\end{itemize}
Zdecydowałem się na to rozwiązanie z kilku powodów:
\begin{itemize}
	\item po przejrzeniu dostępnych w sieci informacji doszedłem do wniosku, że implementacja protokołu HTTP/2.0 jest najlepiej opisana oraz wspierana przez środowisko związane z JavaScriptem,
	\item dobra znajomość języka JavaScript oraz jednoczesna chęć rozwoju umiejętności tworzenia aplikacji w tym języku,
	\item chęć poszerzenia wiedzy dotyczącej budowania aplikacji internetowych za pomocą technologii javascriptowych,
	\item nie ukrywam, że znaczący wpływ na moją decyzję miała również popularność języka JavaScript na rynku pracy.
\end{itemize}

%-----------------
% HTTP/2.0
%-----------------
\chapter{HTTP/2.0}
Wprowadzenie o http/2.0
skad (spdy)
dlaczego tak pozno
  %-----------------
  % Historia
  %-----------------
\section{Server Push}

  %-----------------
  % Pojęcia
  %-----------------
\section{Prioretyzacja}

  %-----------------
  % Schemat komunikacji steganograficznej
  %-----------------
\section{Multiplexing}
\label{sectionSchematKomunikacjiSteganograficznej}
Podstawowy scenariusz, powszechny w literaturze na temat steganografii, odnosi 
się do sytuacji opisanej w \cite{PrisonersProblem}. Dwóch więźniów (w naszym 
przypadku Alicja(\tech{A}) i Bob(\tech{B})) zamknięci są w dwóch odrębnych 
celach. Mogą się ze sobą kontaktować, jednak ich cała korespondencja przechodzi 
przez ręce Wartownika (\tech{W}). Ma on pełen wgląd do przekazywanych 
informacji, więc może przechwycić wszelkie przekazywane tajemnice, a dodatkowo w 
razie podejrzeń może nie dopuścić do komunikacji\footnote{podejrzana informacja 
jest tu analogią do stosowania kryptografii przez więźniów}. W takim przypadku w 
celu przekazania ważnych informacji \tech{A} i \tech{B} muszą posłużyć się 
pewnego rodzaju podstępem. Muszą tak sformułować treść przekazu, aby \tech{W} 
nie rozróżnił ,,niegroźnej'' wiadomości od wiadomości z ukrytym przekazem. 
Dlatego też przekazują wiadomość, w której prawdziwa treść możliwa jest do 
odczytania po złożeniu kolejno każdej np.  drugiej litery z każdego wyrazu.
\begin{figure}[!htbp]
	\begin{center}
\centering
\includegraphics[scale=0.4]{\ImgPath/rys/schemat_komunikacji.png}
\end{center}
	\caption{Schemat komunikacji steganograficznej}
	\label{schematKomunikacji}
\end{figure}

Przedstawioną tak sytuację pokazuje rysunek 
\ref{schematKomunikacji}\footnote{sporządzony na podstawie 
\cite{schematKomunikacjiPrzypis}, rysunek 1, strona 3}. \tech{A} próbuje 
przesłać tajną informację \tech{E} do \tech{B}. Cała komunikacja odbywa się 
przez kanał publiczny, kontrolowany przez \tech{W}. W celu ukrycia faktu 
komunikacji \tech{A} stara się ukryć tajny przekaz w informacji \tech{C}. W celu 
uzyskania skutecznej steganografii \tech{W} nie może rozróżnić informacji 
poprawnej, nie zawierającej tajnych danych, od informacji \tech{S}, która 
zawiera tajną informację. W celu dodatkowego zabezpieczenia przekazu, \tech{A} i 
\tech{B} mogą korzystać z funkcji kryptograficznej zabezpieczającej przekazywane 
informacje. Można tu wykorzystać metody kryptografii symetrycznej (ustalony 
klucz kryptograficzny \tech{K}) lub niesymetrycznej (klucz publiczny 
\tech{K}$_{pub}$ i klucz prywatny \tech{K}$_{pryw}$).

Stosowanie technik kryptograficznych wpływa na poprawę bezpieczeństwa 
przesyłanej informacji, jednak należy pamiętać o nieporządnych cechach jakie 
mogą one wywołać. W większości przypadków umieszczenie tajnej informacji 
steganograficznej w przekazie wiąże się z zamianą istniejącej już nieważnej 
części informacji. Jednak każda porcja usuniętej informacji może mieć pewną 
charakterystyczną postać lub specyficzny histogram. Zastosowanie funkcji 
kryptograficznej w stosunku do tajnej informacji zmienia ją, a wynikowy rozkład 
bitów jest nieprzewidywalny i w większości przypadków różny od standardowych 
histogramów określonych dla podmienianych części wiadomości.
  %-----------------
  % Stegoanaliza
  %-----------------
\section{Protokół binarny}

  %-----------------
  % Metody tworzenia steganografii
  %-----------------
\section{Pipelining}
Przesłanie danych za pomocą przekazu steganograficznego wiąże się w większości 
przypadków z umieszczeniem dodatkowej informacji w wiadomości. Odbywa się to za 
pomocą podmiany tej części wiadomości (nagłówka TCP/IP), która wykazuje cechy 
nadmiarowości lub której (kontrolowana) zmiana nie prowadzi do przerwania 
transmisji. Pewną podgrupą może być w tym przypadku wykorzystanie pól 
oryginalnie pustych (zerowych) lub niewykorzystywanych w istniejących 
implementacjach.

Kanały steganograficzne można podzielić na dwa zasadniczne 
typy\cite{SweetyPresentation}:
\begin{itemize}
	\item kanał pojemnościowy (ang. storage channel) - informacja zawarta w 
częściach wiadomości, polach nagłówka,
	\item kanał czasowy (ang. timing channel) - informacja zawarta w czasach 
wystąpienia danych zdarzeń, np. przesłania pakietu TCP/IP.
\end{itemize}
W przypadku sieci pakietowych można także połączyć dwa typu kanałów 
steganograficznych, tworząc kanał mieszany, w którym jeden z typów (np. 
pojemnościowy) będzie wykorzystywany do przekazywania informacji, a drugi (np. 
czasowy) do sygnalizacji tego zdarzenia.

Większość opracowanych programów służących do przesyłania danych z 
wykorzystaniem steganografii opiera się na kanałach pojemnościowych. Wynika to z 
faktu, że kanały czasowe narzucają pewne ograniczenia na generację pakietów 
TCP/IP przez co ich wykrycie staje się prostsze.

Dodatkowo należy zauważyć, że w sieciach pakietowych można skonstruować 
abstrakcyjny kanał steganograficzny, w którym do przesyłania tajnych danych 
lub/i obsługi protokołu steganograficznego wykorzystywane są różne pola 
nagłówka. Zmiana wykorzystania danego pola może być dynamiczna, zależna od 
wymaganej przepustowości lub w celu zminimalizowania wykrycia kanału 
steganograficznego. 
  %-----------------
  % Cechy kanału steganograficznego
  %-----------------
\section{Kompresja danych}

  %-----------------
  % Steganografia w obiektach multimedialnych
  %-----------------
\section{Steganografia w obiektach multimedialnych}
\label{sectionSteganografiaWObiektachMultimedialnych}

%-----------------
% Wnioski 
%-----------------
\chapter{Wnioski}

Protokół TCP/IP jest najbardziej rozpowszechnionym i używanym protokołem 
komunikacji między systemami w sieci Internet oraz w sieciach intranet. Niestety 
został on opracowany na początku lat siedemdziesiątych, gdy problemy 
bezpieczeństwa informacji nie stały na pierwszym miejscu. Ciągły wzrost działań 
przestępczych w sieci Internet, w tym wymiana nielegalnych treści, prowadzi do 
stosowania coraz to nowszych technik zabezpieczających. Z tego względu obserwuje 
się działania mające na celu wprowadzenie tajnej komunikacji między przejętymi 
systemami, tak aby nie wzbudzić ostrzeżeń w analizatorach sieciowych. Taka 
ukryta komunikacja odbywa się z wykorzystaniem steganografii.

Wprowadzenie steganografii do niskich warstwach stosu TCP/IP umożliwia obejście 
wielu filtrów nałożonych na warstwy wyższe. Większość sieci oparta jest na 
protokołach rodziny TCP/IP, przez co nie można zabronić ich używania. Możliwa 
jest jedynie kontrola poprawności semantyki protokołów TCP/IP, a także 
ewentualna ingerencja w przekazywane wartości, z uwzględnieniem stanowości 
niektórych pól.

Opracowany schemat generacji początkowych numerów sekwencyjnych w jak najlepszy 
sposób odzwierciedla oryginalny proces zachodzący w stosie sieciowym systemu 
Linux. W większości przypadków występujących w rzeczywistych sieciach i 
systemach, numery wygenerowane przy pomocy \tech{Shushi} nie byłyby rozróżnialne 
od numerów wygenerowanych przez stos sieciowy systemu.

Jeżeli proces generacji wartości użytych do przekazania danych 
steganograficznych zostanie oparty o oryginalne mechanizmy używane do ich 
generacji, to pasywny analizator sieciowy nie będzie w stanie wykryć istnienia 
anomalii. Różnice możliwe są do zaobserwowania w przypadku zaistnienia 
specyficznych sytuacji występujących dla danej implementacji protokołu. W 
przypadku zastosowania pasywnego analizatora wymaga to jednak oczekiwania na 
taką sytuację. Z przeprowadzonych testów wynika, że lepszym podejściem jest 
zastosowanie analizatorów aktywnych, które posiadają wiedzę na temat testowanych 
systemów oraz ich chrakterystycznych cech implementacji. Skonstruowanie takiego 
analizatora jest zadaniem stosunkowo prostym a daje bardzo wysoką skuteczność.

Z przeprowadzonych testów wynika, że celowe jest prowadzenie dalszych prac w 
następujących obszarach:
\begin{itemize}
 \item dokładniejszy mechanizm generacji wartości mikrosekund
 \item wprowadzenie algorytmów zdolnych wykryć i uniemożliwić działanie 
analizatora aktywnego
\end {itemize}

Jeżeli powyższe punkty nie zostaną spełnione, analizatory aktywne będą w stanie 
wykryć istnienie modułu steganograficznego opartego na początkowych numerach 
sekwencyjnych.

\begin{tabular}{c|cc}
pierwsza kolumna & druga & trzecia \\ \hline
1 & 2 & 3 \\
a & b & c \\
\end{tabular} 

\begin{equation}
 E = m c^2 \label{einstein}
\end{equation}

Rozwój opracowanego rozwiązania steganograficznego jest możliwy poprzez 
wprowadzenie elementów  -- patrz wzór (\ref{einstein}) -- jak:
\begin{itemize}
 \item obsługa innych, przyszłościowych protokołów sieciowych, takich jak SCTP 
(ang. Stream Control Transmission Protocol)\cite{RFC2960}
 \item zapewnienie dwustronnej komunikacji z wykorzystaniem numerów 
potwierdzenia \tech{ACK}
 \item przeniesienie implementacji do innych systemów operacyjnych
\end{itemize}

Wraz ze wzrostem przepustowości urządzeń sieciowych (obecnie 10Gb/s i więcej) 
wzrasta problem analizy przepływających danych w czasie rzeczywistym. 
Analizatory sieciowe muszą w coraz krótszym czasie zbadać coraz większy strumień 
danych (miliony pakietów na sekundę). Jednak problem wzrostu prędkości sieci 
utrudnia zadanie także osobom implementującym kanały steganograficzne w 
protokole TCP/IP. Coraz więcej operacji wyższych warstw stosu sieciowego 
przenoszonych jest do układów scalonych interfejsów sieciowych. Taka technologia 
znana jest pod skrótem TOE (ang. TCP Offload Engine) i odnosi się przede 
wszystkim do sprzętowej generacji sum kontrolnych oraz mechanizmu TSO (ang. TCP 
segmentation offload). W następnych latach spodziewane jest przenoszenie 
kolejnych elementów stosu sieciowego TCP/IP do implementacji sprzętowych.

Ze względu na rozwój systemów zabezpieczających ruch sieciowy oraz wzrost 
bezpieczeństwa systemów operacyjnych, w kolejnych latach wzrośnie także 
wykorzystanie technik steganograficznych przez grupy przestępcze działające w 
ramach Internetu. Z tego powodu poznanie technik steganograficznych oraz 
wypracowanie metod obrony i wykrywania takiej komunikacji jest bardzo ważne.

%-----------------
% Dodatki 
%-----------------
\appendix
\chapter{Porównanie numerów ISN jądra Linux i modułu Shushi}
\begin{figure}[!htbp]
	\begin{center}
\centering
\includegraphics[scale=0.21]{\ImgPath/rys/IPPortConstData.pdf}
\end{center}
	\caption{Numery ISN wygenerowane przez jądro oraz \tech{Shushi}, stałe 
numery IP oraz porty TCP, stałe dane dla \tech{Shushi}, serie po około 2800 
próbek.}
	\label{IPPortConstData}
\end{figure}

\begin{figure}[!htbp]
	\begin{center}
\centering
\includegraphics[scale=0.21]{\ImgPath/rys/IPPortConstDataDiff.pdf}
\end{center}
	\caption{Różnice pomiędzy kolejnymi numerami ISN wygenerowanymi przez 
jądro oraz \tech{Shushi}, stałe numery IP oraz porty TCP, stałe dane dla 
\tech{Shushi}, serie po około 60000 próbek.}
	\label{IPPortConstDataDiff}
\end{figure}

\begin{figure}[!htbp]
	\begin{center}
\centering
\includegraphics[scale=0.21]{\ImgPath/rys/IPPortRandData.pdf}
\end{center}
	\caption{Numery ISN wygenerowane przez jądro oraz \tech{Shushi}, stałe 
numery IP oraz porty TCP, losowe dane dla \tech{Shushi}, serie po około 860 
próbek.}
	\label{IPPortRandData}
\end{figure}

\begin{figure}[!htbp]
	\begin{center}
\centering
\includegraphics[scale=0.21]{\ImgPath/rys/IPPortRandDataDiff.pdf}
\end{center}
	\caption{Różnice pomiędzy kolejnymi numerami ISN wygenerowanymi przez 
jądro oraz \tech{Shushi}, stałe numery IP oraz porty TCP, losowe dane dla 
\tech{Shushi}, serie po około 60000 próbek.}
	\label{IPPortRandDataDiff}
\end{figure}

\begin{thebibliography}{99}
\addcontentsline{toc}{chapter}{Bibliografia}
\bibitem{Stevens}{W. R. Stevens, G. R. Wright, ,,Biblia TCP/IP tom 1'', RM, 
1998.}
\bibitem{USDoD}{U. S. Department Of Defense, ,,Trusted Computer System 
Evaluation Criteria'', 1985.}
\bibitem{FirstCC}{B. W. Lampson, ,,A note on the confinment problem'', w ,,Proc. 
of the Communications of the ACM'', październik 1973, numer 16:10,\newline 
strony 613-615.} 
\bibitem{PrisonersProblem}{G. J. Simmons, ,,The prisoners' problem and the 
subliminal channel'', w ,,Advances in Cryptology: Proceedings of Crypto 83 (D. 
Chaum, ed.)'', strony 51-67, Plenum Press, 1984.}
\bibitem{Kerckhoff}{ A. Kerckhoffs, ,,La Cryptographie Militaire (Military 
Cryptography)'', J. Sciences Militaires, luty 1883.} 
\bibitem{Hanssen}{A. Havill, ,,The Spy Who Stayed Out In The Cold: The Secret 
Life of Double Agent Robert Hanssen'', St. Martin's Press, 2001.}
\bibitem{schematKomunikacjiPrzypis}{C.Cachin, ,,An Information-Theoretic Model 
for Steganography'', w ,,Information and Computation'', 4 marzec 2004.}
\bibitem{SweetyPresentation}{S.Chauhan, ,,Embedding Covert Channels into 
TCP/IP'', 7th Information Hiding Workshop, czerwiec 2005.}
\bibitem{RFC793}{Information Sciences Institute, University of Southern 
California, ,,Transmission Control Protocol'', RFC793, wrzesień 1981.}
\bibitem{RFC1323}{V. Jacobson, R. Braden, D. Borman, ,,TCP extensions for high 
performance'', RFC1323, maj 1992.}
\bibitem{RFC1948}{S. Bellovin, ,,Defending against sequence number attacks.'', 
RFC1948, IETF, 1996.}
\bibitem{RFC2960}{R. Stewart, Q. Xie, K. Morneault, C. Sharp, H. Schwarzbauer, 
T. Taylor, I. Rytina, M. Kalla, L. Zhang, V. Paxson, „Stream Control 
Transmission Protocol”, RFC2960, Network Working Group, październik 2000.}
\bibitem{Rowland}{C. H. Rowland, ,,Covert Channels in the TCP/IP Protocol 
Suite'', First Monday, 1997. \newline 
\url{http://www.firstmonday.dk/issues/issue2\_5/rowland/}}
\bibitem{LOKI}{Alhambra, daemon9, ,,Project Loki: ICMP Tunneling'', Phrack 
Magazine, Issue 49. \url{http://phrack.org}}
\bibitem{LOKI2}{daemon9, ,,LOKI2'', Phrack Magazine, Issue 51. 
\url{http://phrack.org}}
\bibitem{RWWWS}{van Hauser, Reverse WWW Shell,  THC, The Hacker's 
Choice.\newline \url{www.thc.org}}
\bibitem{CCdetectionSVM}{T. Sohn, J. Seo, J. Moon, ,,A Study on the Covert 
Channel Detection of TCP/IP Header Using Support Vector Machine'', Volume 2836 
of Lecture Notes in Computer Science., Springer-Verlag (2003) 313-324.}
\bibitem{LOKIdetectionSVM}{T. Sohn, T. Noh, J. Moon, ,,Support Vector Machine 
Based ICMP Covert Channel Attack Detection'', Volume 2836 of Lecture Notes in 
Computer Science., Springer-Verlag, 2003, strony 461-464.}
\bibitem{devcc}{J. Giffin, R. Greenstadt, P. Litwack, R. Tibbetts, ,,Covert 
messaging in TCP'', w Dingledine, Privacy Enhancing Technologies. Volume 2482 of 
Lecture Notes in Computer Science., Springer-Verlag (2002) 194-208. 
\url{http://www.mit.edu/\textasciitilde gif/covert-channel/}}
\bibitem{ActiveWardens}{G. Fisk, M. Fisk, Ch. Papadopoulos, J. Neil, 
,,Eliminating Steganography in Internet Traffic with Active Wardens'', 5th 
International Workshop on Information Hiding, październik 2002.} 
\bibitem{JR}{J. Rutkowska, ,,The Implementation of Passive Covert Channels in 
Linux Kernel'', Chaos Communication Congress, grudzień 2004.}
\bibitem{LinuxNetwork}{Ch. Benvenuti, ,,Understanding Linux Network Internals'', 
O'Reilly,\newline grudzień 2005.}
\bibitem{p55}{kossak, ,,Building Into The Linux Network Layer'', Phrack 
Magazine, Issue 55. \url{http://phrack.org}}
\bibitem{ML}{Steven J.Murdoch and Stephen Lewis, ,,Embedding Covert Channels 
into TCP/IP'', University of Cambridge, Computer Laboratory,\newline 29 lipec 
2005.}
\bibitem{NvsNN}{Eugene Tumoian, Maxim Anikeev, ,,Detecting NUSHU Covert Channels 
Using Neural Networks'', Taganrog State University of Radio Engineering, 
Department of Information Security.}
\bibitem{p58}{mayhem, ,,IA32 Advanced Function Hooking'', Phrack 
Magazine,\newline Issue 58. \url{http://phrack.org}}
\bibitem{p61}{bioforge, ,,Hacking the Linux Kernel Network Stack'', Phrack 
Magazine, Issue 61. \url{http://phrack.org}}
\bibitem{kernelMEM}{Robert Love, ,,Kernel Korner - Allocating Memory in the 
Kernel'',\newline 1 grudzień 2003.}

\end{thebibliography}

\zakonczenie  % wklejenie recenzji i opinii

\end{document}
%+++ END +++
